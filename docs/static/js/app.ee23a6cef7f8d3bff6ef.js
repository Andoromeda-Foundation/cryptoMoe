webpackJsonp([1],{"2yse":function(t,e){},EEbw:function(t,e){t.exports={version:"0.20.4"}},Jx2w:function(t,e){t.exports=[{constant:!0,inputs:[],name:"total",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{name:"_id",type:"uint256"}],name:"getRose",outputs:[{name:"birthTime",type:"uint64"},{name:"buyer",type:"address"},{name:"message",type:"string"},{name:"from",type:"string"},{name:"to",type:"string"},{name:"value",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getBalance",outputs:[{name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"ceoAddress",outputs:[{name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{name:"from",type:"string"},{name:"to",type:"string"},{name:"message",type:"string"}],name:"buyRose",outputs:[{name:"",type:"uint256"}],payable:!0,stateMutability:"payable",type:"function"},{constant:!1,inputs:[],name:"withdrawBalance",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"}]},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n("7+uW"),s={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("nav",{staticClass:"navbar is-light"},[n("div",{staticClass:"navbar-brand"},[n("router-link",{staticClass:"navbar-item",attrs:{to:{name:"Home"}}},[t._v("\n        🌹    玫瑰爱链\n      ")]),t._v(" "),n("router-link",{staticClass:"navbar-item",attrs:{to:{name:"Buy"}}},[t._v("\n        送TA玫瑰\n      ")])],1),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticClass:"container main-container"},[n("router-view")],1),t._v(" "),t._m(1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"navbar-end"},[e("div",{staticClass:"navbar-item"},[e("div",{staticClass:"field is-grouped"},[e("p",{staticClass:"control"},[this._v("\n            Ropsten Test Net\n          ")])])])])},function(){var t=this.$createElement,e=this._self._c||t;return e("footer",{staticClass:"footer"},[e("div",{staticClass:"container"},[e("div",{staticClass:"content has-text-centered"},[e("p",[this._v("\n          ❤️"),e("br"),this._v(" Created by KJlmfe\n        ")])])])])}]};var i=n("VU/8")({name:"App"},s,!1,function(t){n("bC+c")},null,null).exports,o=n("/ocq"),r=n("//Fk"),u=n.n(r),c=n("8k0n"),l=n.n(c),p=n("Jx2w"),m=n.n(p),d=window.web3?window.web3.currentProvider:null,y=d?new l.a(d):new l.a(new l.a.providers.HttpProvider("https://ropsten.infura.io/3YGCODEa1zvOrH3kBUjL")),v=y.eth.contract(m.a).at("0xad3D3B1168813790580313996FEC2BE29A62E7A6");window.w=y,window.cc=v,y.eth.defaultAccount=y.eth.accounts[0];var f=function(t){return new u.a(function(e,n){v.getRose(t,function(a,s){return a?n(a):e({birthTime:s[0],buyer:s[1],message:s[2],from:s[3],to:s[4],value:s[5],id:t})})})},_=function(t,e,n,a){return new u.a(function(s,i){v.buyRose(t,e,n,{value:y.toWei(Number(a),"ether"),gas:22e4},function(t,e){return t?i(t):s(e)})})},b=n("uotZ"),h={name:"item-view",data:function(){return{gift:null}},computed:{},created:function(){var t=this;f(this.$route.params.id).then(function(e){t.gift=e}).catch(function(t){console.log(t)})},watch:{},methods:{valueToQuntity:function(t){return Number(Object(b.BigNumber)(t).dividedBy(Object(b.BigNumber)("1000000000000000")))}}},g={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.gift?n("div",{staticClass:"item-view"},[t.gift?n("div",{staticClass:"card"},[n("header",{staticClass:"card-header"},[n("p",{staticClass:"card-header-title"},[t._v("\n        "+t._s(t.gift.from)+" 给 "+t._s(t.gift.to)+" 送了"+t._s(t.valueToQuntity(t.gift.value))+"朵玫瑰花🌹\n      ")]),t._v(" "),t._m(0)]),t._v(" "),n("div",{staticClass:"card-content"},[n("div",{staticClass:"content"},[t._v("\n        "+t._s(t.gift.message)+"\n        "),n("br"),t._v(" "),n("p",{staticStyle:{"text-align":"right","margin-top":"10px"}},[n("small",[t._v(t._s(new Date(1e3*Number(t.gift.birthTime)).toLocaleDateString()))])])])])]):t._e()]):t._e()},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("a",{staticClass:"card-header-icon",attrs:{href:"#","aria-label":"more options"}},[e("span",{staticClass:"icon"},[e("i",{staticClass:"fas fa-angle-down",attrs:{"aria-hidden":"true"}})])])}]},C=n("VU/8")(h,g,!1,null,null,null).exports,w=n("Xxa5"),x=n.n(w),T=n("exGp"),k=n.n(T),M={name:"BuyGift",data:function(){return{from:"",to:"",message:"",value:1}},computed:{noMetaMask:function(){return!window.web3}},methods:{onBuy:function(){var t=this;return k()(x.a.mark(function e(){return x.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t.from,t.to,t.message,t.value),_(t.from,t.to,t.message,.001*t.value).then(function(t){alert("您的爱正在被矿工打包记录到区块上，请稍后到首页查看")}).catch(function(t){alert("出错啦"),console.log(t)});case 2:case"end":return e.stop()}},e,t)}))()}},created:function(){}},E={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"hello"},[t.noMetaMask?n("article",{staticClass:"message is-warning"},[t._m(0),t._v(" "),t._m(1)]):t._e(),t._v(" "),n("h2",{staticClass:"title is-3"},[t._v("送TA玫瑰")]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("你的名字")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.from,expression:"from"}],staticClass:"input",attrs:{type:"text",placeholder:"张三"},domProps:{value:t.from},on:{input:function(e){e.target.composing||(t.from=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("TA的名字")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.to,expression:"to"}],staticClass:"input",attrs:{type:"text",placeholder:"李四"},domProps:{value:t.to},on:{input:function(e){e.target.composing||(t.to=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("数量(1朵玫瑰=0.001 ETH)")]),t._v(" "),n("div",{staticClass:"control"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.value,expression:"value"}],staticClass:"input",attrs:{type:"number"},domProps:{value:t.value},on:{input:function(e){e.target.composing||(t.value=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field"},[n("label",{staticClass:"label"},[t._v("爱的箴言")]),t._v(" "),n("div",{staticClass:"control"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],staticClass:"textarea",attrs:{placeholder:"我爱你一生一世"},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})])]),t._v(" "),n("div",{staticClass:"field is-grouped"},[n("div",{staticClass:"control"},[n("button",{staticClass:"button is-link",on:{click:t.onBuy}},[t._v("确认")])])]),t._v(" "),t._m(2)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"message-header"},[e("p",[this._v("未找到MetaMask")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"message-body"},[this._v("\n      亲，需要使用Chrome浏览器且安装MetaMask插件，才可在区块链上送TA玫瑰。\n      "),e("a",{attrs:{href:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn?hl=en"}},[this._v("安装MetaMask")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("article",{staticClass:"message is-info"},[e("div",{staticClass:"message-body"},[this._v("\n        确认后，您的名字、TA的名字、玫瑰数量以及爱的箴言将会永久的记录在区块链上，无法更改，无法删除。\n        您所支付的ETH，其中95%将用于慈善事业，全程依旧采用区块链记录跟踪，另外5%归合约创建者所有，主要用于网站维护等开销。\n    ")])])}]};var N=n("VU/8")(M,E,!1,function(t){n("2yse")},"data-v-f35c933e",null).exports,A={name:"item-list",data:function(){return{items:[],total:0,displayedTotal:0}},computed:{},created:function(){var t=this;new u.a(function(t,e){v.total(function(n,a){return n?e(n):t(a)})}).then(function(e){t.total=Number(e),t.displayedTotal+=5})},methods:{loadGift:function(t,e){var n=this;return k()(x.a.mark(function a(){var s;return x.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return window.xx=n.items,a.next=3,f(t);case 3:s=a.sent,n.items[e]=s,n.$forceUpdate();case 6:case"end":return a.stop()}},a,n)}))()},loadMore:function(t){this.displayedTotal>=this.total&&alert("没有更多啦"),this.displayedTotal+=t},valueToQuntity:function(t){return Number(Object(b.BigNumber)(t).dividedBy(Object(b.BigNumber)("1000000000000000")))}},watch:{displayedTotal:function(t){var e=Math.min(t,this.total);console.log(e,"nnn");for(var n=0;n<e;n+=1)if(!this.items[n]){var a=this.total-n-1;this.loadGift(a,n)}}}},B={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"news-view1"},[t._m(0),t._v(" "),n("br"),n("br"),t._v(" "),n("div",{staticClass:"columns is-multiline is-mobile"},t._l(t.items,function(e){return e?n("router-link",{key:e.id,staticClass:"column is-full-mobile is-two-thirds-tablet is-half-desktop is-one-third-widescreen is-one-quarter-fullhd",attrs:{to:{name:"Gift",params:{id:e.id}}}},[n("div",{staticClass:"card"},[n("header",{staticClass:"card-header"},[n("p",{staticClass:"card-header-title"},[t._v("\n              "+t._s(e.from)+" 给 "+t._s(e.to)+" 送了"+t._s(t.valueToQuntity(e.value))+"朵玫瑰花🌹\n            ")]),t._v(" "),n("a",{staticClass:"card-header-icon",attrs:{href:"#","aria-label":"more options"}},[n("span",{staticClass:"icon"},[n("i",{staticClass:"fas fa-angle-down",attrs:{"aria-hidden":"true"}})])])]),t._v(" "),n("div",{staticClass:"card-content"},[n("div",{staticClass:"content"},[t._v("\n              "+t._s(e.message)+"\n              "),n("br"),t._v(" "),n("p",{staticStyle:{"text-align":"right","margin-top":"10px"}},[n("small",[t._v(t._s(new Date(1e3*Number(e.birthTime)).toLocaleDateString()))])])])])])]):t._e()})),t._v(" "),n("div",{staticStyle:{"text-align":"center"}},[t.displayedTotal<t.total?n("button",{staticClass:"button",on:{click:function(e){t.loadMore(3)}}},[t._v("加载更多")]):t._e()])])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("section",{staticClass:"hero is-medium is-danger is-bold"},[e("div",{staticClass:"hero-body"},[e("div",{staticClass:"container"},[e("h1",{staticClass:"title"},[this._v("\n          玫瑰爱链\n      ")]),this._v(" "),e("h2",{staticClass:"subtitle"},[this._v("\n        爱TA，就把爱永久的记录在区块链上\n      ")])])])])}]},R=n("VU/8")(A,B,!1,null,null,null).exports;a.a.use(o.a);var $=new o.a({routes:[{path:"/",name:"Home",component:R},{name:"Gift",path:"/gift/:id(\\d+)",component:C},{name:"Buy",path:"/buy",component:N}]});a.a.config.productionTip=!1,new a.a({el:"#app",router:$,components:{App:i},template:"<App/>"})},"R/pS":function(t,e){t.exports=[{constant:!0,inputs:[{name:"_owner",type:"address"}],name:"name",outputs:[{name:"o_name",type:"bytes32"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"content",outputs:[{name:"",type:"bytes32"}],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"reserve",outputs:[],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"subRegistrar",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_newOwner",type:"address"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_registrar",type:"address"}],name:"setSubRegistrar",outputs:[],type:"function"},{constant:!1,inputs:[],name:"Registrar",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_a",type:"address"},{name:"_primary",type:"bool"}],name:"setAddress",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_content",type:"bytes32"}],name:"setContent",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"disown",outputs:[],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"_name",type:"bytes32"},{indexed:!1,name:"_winner",type:"address"}],name:"AuctionEnded",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"_name",type:"bytes32"},{indexed:!1,name:"_bidder",type:"address"},{indexed:!1,name:"_value",type:"uint256"}],name:"NewBid",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"}],name:"Changed",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"},{indexed:!0,name:"addr",type:"address"}],name:"PrimaryChanged",type:"event"}]},UIsv:function(t,e){t.exports=[{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"owner",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_refund",type:"address"}],name:"disown",outputs:[],type:"function"},{constant:!0,inputs:[{name:"_name",type:"bytes32"}],name:"addr",outputs:[{name:"",type:"address"}],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"}],name:"reserve",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_newOwner",type:"address"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"_name",type:"bytes32"},{name:"_a",type:"address"}],name:"setAddr",outputs:[],type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"name",type:"bytes32"}],name:"Changed",type:"event"}]},"bC+c":function(t,e){},oPsS:function(t,e){t.exports=[{constant:!1,inputs:[{name:"from",type:"bytes32"},{name:"to",type:"address"},{name:"value",type:"uint256"}],name:"transfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"from",type:"bytes32"},{name:"to",type:"address"},{name:"indirectId",type:"bytes32"},{name:"value",type:"uint256"}],name:"icapTransfer",outputs:[],type:"function"},{constant:!1,inputs:[{name:"to",type:"bytes32"}],name:"deposit",outputs:[],payable:!0,type:"function"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"AnonymousDeposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"address"},{indexed:!0,name:"to",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"Deposit",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"bytes32"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"value",type:"uint256"}],name:"Transfer",type:"event"},{anonymous:!1,inputs:[{indexed:!0,name:"from",type:"bytes32"},{indexed:!0,name:"to",type:"address"},{indexed:!1,name:"indirectId",type:"bytes32"},{indexed:!1,name:"value",type:"uint256"}],name:"IcapTransfer",type:"event"}]}},["NHnr"]);
//# sourceMappingURL=app.ee23a6cef7f8d3bff6ef.js.map